
关键库函数
```
//创建实例
libvlc_new()
//加载媒体
libvlc_media_new_path()/libvlc_media_new_location()（file:///、http://、rtsp://、screen://）
//创建播放器
libvlc_media_player_new_from_media()
//设置播放窗口
libvlc_media_player_set_hwnd()
//开始播放
libvlc_media_player_play()
//获取播放长度
libvlc_media_player_get_length()
//获取播放媒体的宽/高
libvlc_video_get_width()/libvlc_video_get_height()
//获取播放音量
libvlc_audio_get_volume()
//设置音量
libvlc_audio_set_volume()
//获取播放位置
libvlc_media_player_get_position()
//设置播放位置
libvlc_media_player_set_position()
//暂停
libvlc_media_player_pause()
//停止
libvlc_media_player_stop()
//释放播放器
libvlc_media_player_release()
//释放媒体
libvlc_media_release()
//释放实例
libvlc_release()
```
### 设计思路
1、需求
视频播放器
2、核心功能
libvlc 要掌握
mvc架构、.COM/.NET架构
功能
mfc

### 模块设计

MVC架构
- View MFC
- Model libvlc封装起来作为其中一部分
- Controller 

**UI模块CVideoClientDlg**
接口：
- Play、Pause、Stop响应接口
- 定时器OnTimer，来刷新进度条
- 滑动条拖动响应接口
- 地址输入的变量


**libVLC模块EVlc**
接口：
- 初始化
- 设置播放窗口
- 设置播放地址
- 播放/暂停/停止/音量/位置/销毁

**控制层模块VideoClientController**
作用:协调UI和vlc
接口：
- 初始化（播放窗口设置）
- 响应播放、暂停、地址、停止、音量、进度、关闭

**CVideoClientApp模块**
接口：InitInstance


![[vlc项目 client文件.png]]

![[音视频客户端时序图.png]]

![[音视频客户端类图.png]]
VideoClientDlg类定义

![[VideoClientDlg类定义.png]]

VLC封装
![[vlc封装.png]]
![[VLCSize类.png]]

VideoClientController类
![[VideoClientController类.png]]

![[音视频客户端实际效果.png]]


视频服务器


RTSP协议
RTP--数据包 RTCP--命令
先用RTSP信息交互 再用RTP/RTCP媒体传输

clinet